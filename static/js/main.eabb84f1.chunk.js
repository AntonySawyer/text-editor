(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(8),l=n.n(i),r=(n(16),n(2)),c=n(3),s=n(5),u=n(4),d=n(6),g=function(e){return JSON.parse(localStorage.getItem(e))},m=function(){var e=g("notes");null!==e&&0!==Object.keys(e).length||localStorage.setItem("notes",JSON.stringify({1:{id:1,title:"Unnamed note \u21161",text:'Click "edit" button!',tags:""}})),null===g("tags")&&localStorage.setItem("tags",JSON.stringify({}))},f=function(e,t,n){var a=g(e);switch(e){case"tags":if(!Object.values(a).includes(t))a[b(e)]=t;break;case"notes":a[n]=t[n]}localStorage.setItem(e,JSON.stringify(a))},v=function(e,t){var n=g(e);delete n[t],localStorage.setItem(e,JSON.stringify(n)),m()},h=function(e){var t=g(e);return Object.keys(t)[0]},b=function(e){var t=g(e),n=Object.keys(t);return 0===n.length?1:+n[n.length-1]+1},y=n(9),E=n(1),p=function(){var e=document.getElementById("newTadName"),t=e.value.trim().replace(/ /g,"_");return e.value="",t},N=function(e){var t=document.getElementById("editNoteTitle").value;""===t&&(t="Unnamed note \u2116".concat(e));var n=document.getElementById("noteText").innerText,a=T().join(",");return Object(E.a)({},e,{id:e,title:t,text:n,tags:a})},T=function(){var e=[];return document.querySelectorAll("#noteTags span").forEach(function(t){return e.push(t.innerText)}),e},S=function(e,t){return t.map(function(e){return p(e)}),e.tags=k(t).join(","),Object(E.a)({},e.id,e)},k=function(e){return Object(y.a)(new Set(e))};function w(){var e=document.querySelector(".textArea");e.setAttribute("contentEditable",!0),e.classList.add("editNoteText"),I(e),document.getElementById("editBtn").classList.add("hidden"),document.getElementById("saveBtn").classList.remove("hidden"),document.querySelector(".notes-viewer > h1").style="display: none",document.getElementById("editNoteTitle").classList.remove("hidden")}function O(){var e=document.querySelector(".textArea");e.setAttribute("contentEditable",!1),e.classList.remove("editNoteText"),document.getElementById("editBtn").classList.remove("hidden"),document.getElementById("saveBtn").classList.add("hidden"),document.querySelector(".notes-viewer > h1").style={},document.getElementById("editNoteTitle").classList.add("hidden"),document.getElementById("newNoteTitle").value=""}function I(e){if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),a.collapse(!1),a.select()}}var j=function(e,t){var n={};for(var a in e)t.includes(e[a])&&(n[a]=e[a]);return n},x=(n(17),function(e){var t=e.title,n=e.deleteData,a=e.filter;return o.a.createElement("div",{className:"tag-wrapper"},o.a.createElement("span",{onClick:a},t),o.a.createElement("button",{className:"btn btn-red",onClick:n},"del"))}),D=function(e){var t=e.tags,n=e.deleteData,a=e.saveData,i=e.filter,l=[];return Object.keys(t).forEach(function(e){l.push(o.a.createElement(x,{key:e,title:t[e],filter:function(){return i(e)},deleteData:function(){return n("tags",e)}}))}),o.a.createElement("div",{className:"tag-cloud"},o.a.createElement("input",{type:"text",id:"newTadName",placeholder:"Type new tag here..."}),o.a.createElement("button",{className:"btn btn-green",onClick:function(){return a("tags")}},"Add"),o.a.createElement("div",null,l))},C=(n(18),function(e){var t=e.activeNoteId,n=e.notes,a=e.tags,i=e.onChange,l=e.deleteData,r=e.saveData,c=e.newNote,s=e.filter,u=e.filterEnabled,d=[];return Object.keys(n).forEach(function(e){d.push(o.a.createElement("li",{key:e,className:t===e?"active":void 0},o.a.createElement("label",{htmlFor:"note_".concat(e)},n[e].title),o.a.createElement("input",{type:"radio",id:"note_".concat(e),name:"notesTitles",checked:+e===+t,onChange:function(){return i({id:e})}})))}),o.a.createElement("div",{className:"notes-list"},o.a.createElement("h1",null,"Notes"),o.a.createElement("input",{type:"text",id:"newNoteTitle",placeholder:"Add new note title..."}),o.a.createElement("button",{className:"btn btn-green",onClick:c},"New"),o.a.createElement("ul",null,d),o.a.createElement("span",null,"Filter by: ",u||"none"),o.a.createElement("button",{onClick:function(){return s(null)},className:"btn btn-inverted"},"X"),o.a.createElement(D,{tags:a,deleteData:l,saveData:r,filter:s}))}),B=(n(19),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value));"noteText"===e.target.id&&[8,32].includes(e.keyCode)&&n.highlightTags()},n.highlightTags=function(){var e=document.getElementById("noteText"),t=e.innerText,a=t.match(/(#[^\s]+)/g);if(null!==a){e.innerHTML=t.replace(/(#[^\s]+)/g,'<span class="hightlight">$1</span>');var o=T();a.map(function(e){return e.slice(1)}),a.every(function(e){return o.includes(e)})&&o.every(function(e){return a.includes(e)})||n.props.autoTagCreate(a),null!==document.querySelector(":focus")&&"noteText"===document.querySelector(":focus").id&&I(e)}},n.state={title:n.props.note.title},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null===document.querySelector('p[contenteditable="true"]')&&this.highlightTags()}},{key:"componentDidUpdate",value:function(){null===document.querySelector('p[contenteditable="true"]')&&this.highlightTags()}},{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.note.title})}},{key:"render",value:function(){var e=this,t=this.props,n=t.note,a=t.tags,i=t.editNote,l=t.saveData,r=t.deleteData,c=t.filter,s=[];return 0!==Object.keys(a).length&&Object.keys(a).forEach(function(e){s.push(o.a.createElement(x,{key:e,title:a[e],filter:function(){return c(e)},deleteData:function(){return r("tags",e)}}))}),o.a.createElement("div",{className:"notes-viewer"},o.a.createElement("h1",null,this.state.title),o.a.createElement("input",{type:"text",value:this.state.title,className:"hidden",id:"editNoteTitle",onChange:this.handleChange,name:"title"}),o.a.createElement("button",{className:"btn btn-red",onClick:function(){return r("notes",n.id)}},"Del"),o.a.createElement("button",{className:"btn btn-orange",onClick:i,id:"editBtn"},"Edit"),o.a.createElement("button",{className:"btn btn-green hidden",onClick:function(){e.highlightTags("add"),l("notes",n.id)},id:"saveBtn"},"Save"),o.a.createElement("p",{className:"textArea",id:"noteText",contentEditable:!1,onKeyUp:this.handleChange,name:"text"},this.props.note.text),o.a.createElement("div",{id:"noteTags"},s))}}]),t}(o.a.Component)),R=(n(20),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).changeNote=function(e){O(),""===n.state.filterEnabled?n.reReadStorage(e.id):n.setState({activeNoteId:e.id,noteTags:j(n.state.tags,n.state.notes[e.id].tags.split(","))})},n.reReadStorage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h("notes"),t=g("tags"),a=g("notes"),o=j(t,a[e].tags.split(","));n.setState({tags:t,notes:a,activeNoteId:e,noteTags:o,filterEnabled:""})},n.deleteData=function(e,t){v(e,t),n.setState({filterEnabled:""}),n.reReadStorage()},n.saveData=function(e,t){var n="tags"===e?p():N(t);f(e,n,t),O()},n.newNote=function(){w(),document.querySelector(".textArea").innerHTML="",document.getElementById("editNoteTitle").value="",document.getElementById("editNoteTitle").value=document.getElementById("newNoteTitle").value,document.querySelectorAll("#noteTags span").forEach(function(e){return e.innerHTML=""});var e=b("notes"),t=N(e);f("notes",t,e),n.reReadStorage(e)},n.autoTagCreate=function(e){var t=n.state,a=t.activeNoteId,o=t.notes,i=t.tags,l=Object.values(i),r=e.filter(function(e){return!l.includes(e)});r.map(function(e){return p(e)}),k(r).forEach(function(e){return f("tags",e)});var c=S(o[a],e);f("notes",c,a),n.reReadStorage(a)},n.filter=function(e){if(null===e)return n.reReadStorage(),void n.setState({filterEnabled:""});var t=g("notes"),a=g("tags"),o={};for(var i in t)t[i].tags.split(",").includes(a[e])&&(o[i]=t[i]);0!==Object.keys(o).length?n.setState({activeNoteId:Object.keys(o)[0],notes:o,filterEnabled:a[e],noteTags:j(a,o[Object.keys(o)[0]].tags.split(","))}):n.deleteData("tags",e)},m(),n.state={activeNoteId:h("notes"),tags:g("tags"),notes:g("notes"),filterEnabled:"",noteTags:""},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeNoteId,n=e.tags,a=e.notes,i=e.filterEnabled,l=e.noteTags;return o.a.createElement("div",{className:"App"},o.a.createElement(C,{activeNoteId:t,notes:a,tags:n,onChange:this.changeNote,deleteData:this.deleteData,saveData:this.saveData,newNote:this.newNote,filter:this.filter,filterEnabled:i}),o.a.createElement(B,{note:a[this.state.activeNoteId],tags:l,editNote:w,saveData:this.saveData,deleteData:this.deleteData,autoTagCreate:this.autoTagCreate,filter:this.filter}))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.eabb84f1.chunk.js.map