(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(8),l=n.n(i),r=(n(16),n(2)),c=n(3),s=n(5),d=n(4),u=n(6),m=function(e){return JSON.parse(localStorage.getItem(e))},g=function(){null===localStorage.getItem("notes")&&localStorage.setItem("notes",JSON.stringify({1:{id:1,title:"New note",text:'Click "edit" button!',tags:""}})),null===localStorage.getItem("tags")&&localStorage.setItem("tags",JSON.stringify({}))},f=function(e,t,n){var a=m(e);switch(e){case"tags":if(!Object.values(a).includes(t))a[b(e)]=t;break;case"notes":a[n]=t[n]}localStorage.setItem(e,JSON.stringify(a))},v=function(e,t){var n=m(e);delete n[t],localStorage.setItem(e,JSON.stringify(n))},h=function(e){var t=m(e);return Object.keys(t)[0]},b=function(e){var t=m(e),n=Object.keys(t);return 0===n.length?1:+n[n.length-1]+1},E=function(e){return e in m("notes")},p=n(9),y=n(1),N=function(){var e=document.getElementById("newTadName"),t=e.value.trim().replace(/ /g,"_");return e.value="",t},w=function(e){var t=document.getElementById("editNoteTitle").value;""===t&&(t="Unnamed note \u2116".concat(e));var n=document.getElementById("noteText").innerText,a=[];document.querySelectorAll("#noteTags span").forEach(function(e){return a.push(e.innerText)});var o=a.join(",");return Object(y.a)({},e,{id:e,title:t,text:n,tags:o})},T=function(e,t){return t.map(function(e){return N(e)}),e.tags=S(t).join(","),Object(y.a)({},e.id,e)},S=function(e){return Object(p.a)(new Set(e))};function k(){var e=document.querySelector(".textArea");e.setAttribute("contentEditable",!0),e.classList.add("editNoteText"),x(e),document.getElementById("editBtn").classList.add("hidden"),document.getElementById("saveBtn").classList.remove("hidden"),document.querySelector(".notes-viewer > h1").style="display: none",document.getElementById("editNoteTitle").classList.remove("hidden")}function O(){var e=document.querySelector(".textArea");e.setAttribute("contentEditable",!1),e.classList.remove("editNoteText"),document.getElementById("editBtn").classList.remove("hidden"),document.getElementById("saveBtn").classList.add("hidden"),document.querySelector(".notes-viewer > h1").style={},document.getElementById("editNoteTitle").classList.add("hidden"),document.getElementById("newNoteTitle").value=""}function x(e){if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),a.collapse(!1),a.select()}}var D=function(e,t){var n={};for(var a in e)t.includes(e[a])&&(n[a]=e[a]);return n},j=(n(17),function(e){var t=e.title,n=e.deleteData,a=e.filter;return o.a.createElement("div",{className:"tag-wrapper"},o.a.createElement("span",{onClick:a},t),o.a.createElement("button",{className:"btn btn-red",onClick:n},"del"))}),C=function(e){var t=e.tags,n=e.deleteData,a=e.saveData,i=e.addNew,l=e.filter,r=[];return Object.keys(t).forEach(function(e){r.push(o.a.createElement(j,{key:e,title:t[e],filter:function(){return l(e)},deleteData:function(){return n("tags",e)}}))}),o.a.createElement("div",{className:"tag-cloud"},i&&o.a.createElement("input",{type:"text",id:"newTadName",placeholder:"Type new tag here..."}),i&&o.a.createElement("button",{className:"btn btn-green",onClick:function(){return a("tags")}},"Add"),o.a.createElement("div",null,r))},B=(n(18),function(e){var t=e.activeNote,n=e.notes,a=e.tags,i=e.onChange,l=e.deleteData,r=e.saveData,c=e.newNote,s=e.filter,d=e.filterEnabled,u=[];return Object.keys(n).forEach(function(e){u.push(o.a.createElement("li",{key:e,className:t===e?"active":void 0},o.a.createElement("label",{htmlFor:"note_".concat(e)},n[e].title),o.a.createElement("input",{type:"radio",id:"note_".concat(e),name:"notesTitles",checked:+e===+t,onChange:function(){return i({id:e})}})))}),o.a.createElement("div",{className:"notes-list"},o.a.createElement("h1",null,"Notes"),o.a.createElement("input",{type:"text",id:"newNoteTitle",placeholder:"Add new note title..."}),o.a.createElement("button",{className:"btn btn-green",onClick:c},"New"),o.a.createElement("ul",null,u),o.a.createElement("span",null,"Filter by: ",d||"none"),o.a.createElement("button",{onClick:function(){return s(null)},className:"btn btn-inverted"},"X"),o.a.createElement(C,{tags:a,deleteData:l,saveData:r,addNew:!0,filter:s}))}),I=(n(19),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(y.a)({},e.target.name,e.target.value)),"noteText"===e.target.id&&32===e.keyCode&&n.highlightTags("add")},n.highlightTags=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"view",t=document.getElementById("noteText"),a=t.innerText;if(null!==a.match(/(#\w+)/g)){if(t.innerHTML=a.replace(/(#\w+)/g,'<span class="hightlight">$1</span>'),"add"===e){var o=a.match(/(#\w+)/g);n.props.autoTagCreate(o.map(function(e){return e.slice(1)}))}null!==document.querySelector(":focus")&&"noteText"===document.querySelector(":focus").id&&x(t)}},n.state={title:n.props.note.title},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null===document.querySelector('p[contenteditable="true"]')&&this.highlightTags()}},{key:"componentDidUpdate",value:function(){null===document.querySelector('p[contenteditable="true"]')&&this.highlightTags()}},{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.note.title})}},{key:"render",value:function(){var e=this,t=this.props,n=t.note,a=t.tags,i=t.editNote,l=t.saveData,r=t.deleteData,c=t.filter;return o.a.createElement("div",{className:"notes-viewer"},o.a.createElement("h1",null,this.state.title),o.a.createElement("input",{type:"text",value:this.state.title,className:"hidden",id:"editNoteTitle",onChange:this.handleChange,name:"title"}),o.a.createElement("button",{className:"btn btn-red",onClick:function(){return r("notes",n.id)}},"Del"),o.a.createElement("button",{className:"btn btn-orange",onClick:i,id:"editBtn"},"Edit"),o.a.createElement("button",{className:"btn btn-green hidden",onClick:function(){e.highlightTags("add"),l("notes",n.id)},id:"saveBtn"},"Save"),o.a.createElement("p",{className:"textArea",id:"noteText",contentEditable:!1,onKeyUp:this.handleChange,name:"text"},this.props.note.text),o.a.createElement("div",{id:"noteTags"},o.a.createElement(C,{tags:a,addNew:!1,filter:c,deleteData:r})))}}]),t}(o.a.Component)),R=(n(20),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).changeNote=function(e){O(),n.setState({activeNote:e.id})},n.reReadStorage=function(){n.setState({tags:m("tags"),notes:m("notes")}),E(n.state.activeNote)||n.setState({activeNote:h("notes")})},n.deleteData=function(e,t){v(e,t),n.setState({filterEnabled:""}),n.reReadStorage()},n.saveData=function(e,t){var a="tags"===e?N():w(t);f(e,a,t),n.reReadStorage(),O()},n.newNote=function(){k(),document.querySelector(".textArea").innerHTML="",document.getElementById("editNoteTitle").value="",document.getElementById("editNoteTitle").value=document.getElementById("newNoteTitle").value,document.getElementById("noteTags").innerHTML="";var e=b("notes"),t=w(e);f("notes",t,e),n.reReadStorage(),n.setState({activeNote:e})},n.autoTagCreate=function(e){var t=n.state,a=t.activeNote,o=t.notes,i=t.tags,l=Object.values(i),r=e.filter(function(e){return!l.includes(e)});r.map(function(e){return N(e)}),S(r).forEach(function(e){return f("tags",e)});var c=T(o[a],e);f("notes",c,a),n.reReadStorage()},n.filter=function(e){if(null===e)return n.reReadStorage(),void n.setState({filterEnabled:""});var t=m("notes"),a=m("tags"),o={};for(var i in t)t[i].tags.split(",").includes(a[e])&&(o[i]=t[i]);0!==Object.keys(o).length?n.setState({activeNote:Object.keys(o)[0],notes:o,filterEnabled:a[e]}):n.deleteData("tags",e)},g(),n.state={activeNote:h("notes"),tags:m("tags"),notes:m("notes"),filterEnabled:""},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeNote,n=e.tags,a=e.notes;return o.a.createElement("div",{className:"App"},o.a.createElement(B,{activeNote:t,notes:a,tags:n,onChange:this.changeNote,deleteData:this.deleteData,saveData:this.saveData,newNote:this.newNote,filter:this.filter,filterEnabled:this.state.filterEnabled}),o.a.createElement(I,{note:a[this.state.activeNote],tags:D(n,a[t].tags.split(",")),editNote:k,saveData:this.saveData,deleteData:this.deleteData,autoTagCreate:this.autoTagCreate,filter:this.filter}))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.cb64e5f8.chunk.js.map